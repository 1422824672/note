## 内存管理

#### 1.虚拟内存

##### 虚拟内存

单片机没有操作系统，所以每次写完代码，都需要借助工具把程序烧录进去

单片机的CPU是直接操作内存的物理地址

因此不能同时运行两个程序，因为会互相覆盖在内存地址的值，程序会崩溃

###### 解决方法

让操作系统为每个进程分配独立一套虚拟地址，每个进程不能直接访问物理地址，让地址隔离开来

程序访问虚拟地址的时候，由操作系统来转换成不同的物理地址

预示引出了两种地址的概念：

- 程序所使用的内存地址叫做虚拟内存地址
- 实际存在硬件里面的空间地址叫做物理内存地址

###### 操作系统如何管理虚拟地址与物理地址之间的关系

主要有内存分段和内存分页两种方式

****

##### 内存分段

程序由若干个逻辑分段组成，如可由代码分段，数据分段，栈段，堆段组成

不同的段由不同的属性，所以用分段的形式把这些段分离出来

###### 分段机制下虚拟地址和物理地址如何映射

分段机制下虚拟地址由两部分组成，段选择子和段内偏移量

物理内存地址 = 段基地址 + 段内偏移量

缺点：

- 内存碎片
- 内存交换效率低

