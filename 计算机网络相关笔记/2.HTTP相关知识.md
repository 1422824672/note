## HTTP相关知识

#### 1.HTTP常见面试题

##### HTTP是什么

HTTP是超文本传输协议

- 协议 计算机之间的规范，并按照规范处理相关问题
- 传输 两点间双向传输，中转/代理服务器也需满足HTTP协议
- 超文本 含有文字、图片、视频、甚至（超）链接的文本

> HTTP是超文本传输协议，是一种在点对点传输含有文字、图片、视频、超链接等超文本时双方所遵循的约定和规范。

##### HTTP常见的状态码

- 2xx 成功，报文正在被处理
- 3xx 重定向
- 4xx 客户端错误，请求报文有误
- 5xx 服务器错误，服务器处理请求时发生错误

##### HTTP常见字段

- Host 访问同一台服务器不同网站
- Content-Length 本次回应数据长度
- Connection 客户端要求服务器建立持久连接
- Content-Type 回应客户端的数据格式
- Content-Encoding 数据的压缩方法

##### GET和POST区别

- GET 请求将请求数据放在url，发送请求
- POST 请求将数据放在body里，发送请求，比如提交表单

##### GET和POST是否安全幂等

**安全** 指请求方法不会破坏服务器资源

**幂等** 指多次执行相同操作结果都是相同的

- GET 是安全且幂等的
- POST 是不安全不幂等的，因为会修改服务器数据

##### HTTP1.1的优点和体现

- 简单，易于理解
- 灵活易于扩展，开发人员可以自定义和扩充
- HTTP工作在应用层，则下层可随意变动
- 应用广泛跨平台

##### HTTP缺点

- 无状态 优点是减轻服务器负担，但缺点也显而易见，某些需要验证用户身份的一系列环节都会造成困扰，会多次验证身份信息，解决方法有cookie技术，当客户端请求时带上cookie避免多次验证
- 明文传输 将所有信息暴露了出去，某些信息很容易被窃取
- HTTP不安全，明文传输内容可能被窃听，不验证双方身份则可能遇到伪装，无法证明报文完整性，则有可能被篡改数据

> 解决方式可以使用HTTPS来解决，引入SSL/TLS传输层

##### HTTP1.1性能

- 长连接 默认为长连接方式 keep-alive，没有一方明确断开连接则保持连接状态
- 管道网络传输 客户端可以发起多个请求，无需等待回应，减少整体响应时间，但响应顺序还是依据请求顺序，如果前面的响应很慢，则会造成对头堵塞

##### HTTP与HTTPS的区别

- HTTP明文传输有封面，HTTPS加入了SSL/TLS安全协议，使得报文加密传输
- HTTP连接简单，TCP三次握手即可传输，但HTTP必须进行SSL/TLS握手才能传输
- HTTP端口号为80，HTTPS端口号为443
- HTTPS需要申请数字证书

##### HTTPS所解决的问题

- 窃听风险 -- 信息加密 -- 混合加密
- 篡改风险 -- 校验机制 -- 摘要算法
- 冒充风险 -- 身份证书 -- 数字证书

1.混合加密

HTTPS采用混合加密，使用了对称加密和非对称加密

2.摘要算法

通过摘要算法算出明文的指纹，比较两个明文指纹，若相同，则数据是完整的。

3.数字证书

借助三方机构将服务器公钥放在数字证书中，只要证书可信，公钥就可信

##### HTTPS的建立与交互

客户端向服务器要公钥

双方生产会话密钥

双方通过会话密钥加密通信

##### HTTP/1.1、HTTP/2、HTTP/3演变

优点：HTTP1.1与HTTP1.0比较，采用了TCP长连接方式，支持了管道网络传输

缺点：冗余发送冗余信息，没有请求优先级控制，请求只能从客户端发起，服务器只能被动响应

HTTP/2优点是进行了头部压缩，并将报文使用二进制格式传输，并可指定优先级

HTTP/2实现了并发进行多个请求或回应

HTTP/2的服务器可以主动向客户端发送消息，例如浏览器请求HTML时，服务器就将JS、CSS等文件主动发送给客户端，也就是服务器推送。

HTTP/3基于TCP中阻塞的问题，将TCP协议改成了UDP

#### 2.HTTP/1.1如何优化

三种优化思路：

- 尽量避免发送HTTP请求
- 在需要发送HTTP请求时，考虑如何减少请求次数
- 减少服务器的HTTP相应的数据大小

##### 如何避免发送HTTP请求

